from collections import defaultdict

def fourSumCount(nums1: list[int], nums2: list[int], nums3: list[int], nums4: list[int]) -> int:
    count = 0

    for i in nums1:
        for j in nums2:
            for k in nums3:
                for l in nums4:
                    if not sum((i, j, k, l)):
                        count += 1

    return count


def listIntToDict(list):
    dict_int = defaultdict(int)
    for i in list:
        dict_int[i] += 1

    return dict_int


def fourSumCountDict(nums1: list[int], nums2: list[int], nums3: list[int], nums4: list[int]) -> int:
    count = 0
    dict_1 = listIntToDict(nums1)
    dict_2 = listIntToDict(nums2)
    dict_3 = listIntToDict(nums3)
    dict_4 = listIntToDict(nums4)

    for key1, value1 in dict_1.items():
        for key2, value2 in dict_2.items():
            for key3, value3 in dict_3.items():
                key4 = 0 - key1 - key2 - key3
                if dict_4[key4]:
                    count += value1 * value2 * value3 * dict_4[key4]
    return count

def fourSumCountDict2(A: list[int], B: list[int], C: list[int], D: list[int]) -> int:
        """самый быстрый способ - не мой"""
        mp = dict()
        for a in A:
            for b in B:
                mp[a+b] = mp.get(a+b, 0) + 1
        count = 0
        for c in C:
            for d in D:
                if -c-d in mp:
                    count += mp[-(c+d)]
        return count

'''
numbers = [1,2,3,1,1,5,0,0]
dict_number = listIntToDict(numbers)
print(dict_number[12])
'''

nums1 = [1,2]
nums2 = [-2,-1]
nums3 = [-1,2]
nums4 = [0,2]
print(fourSumCount(nums1, nums2, nums3, nums4) == 2)
print(fourSumCountDict(nums1, nums2, nums3, nums4) == 2)

nums1 = [0,0,0,0]
nums2 = [0,0,0,0]
nums3 = [0,0,0,0]
nums4 = [0,0,0,1]
print(fourSumCount(nums1, nums2, nums3, nums4))
print(fourSumCountDict(nums1, nums2, nums3, nums4))

nums1 = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
nums2 = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
nums3 = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
nums4 = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
print(fourSumCountDict(nums1, nums2, nums3, nums4))


nums1 = [-268435441,-268434600,-268434993,-268435357,-268434692,-268434749,-268435266,-268434456,-268435317,-268435261,-268434827,-268434527,-268434811,-268435165,-268434656,-268434992,-268435385,-268434456,-268435410,-268434590,-268434935,-268434512,-268434502,-268434664,-268435392,-268434592,-268435183,-268435301,-268434930,-268434781,-268434664,-268434995,-268434516,-268434576,-268434474,-268434804,-268435168,-268435241,-268435199,-268434821,-268435402,-268434891,-268435214,-268435340,-268434576,-268434926,-268434902,-268434708,-268435048,-268434793,-268435363,-268435362,-268434993,-268434744,-268435010,-268435001,-268434781,-268434601,-268434736,-268435173,-268435376,-268435321,-268435392,-268435342,-268434630,-268434862,-268435263,-268434841,-268434809,-268435181,-268435184,-268434859,-268434464,-268434702,-268434729,-268434794,-268434935,-268434483,-268434948,-268434482,-268435152,-268434781,-268434622,-268434650,-268435405,-268434901,-268434927,-268435189,-268435028,-268435401,-268434959,-268434515,-268435371,-268435203,-268434729,-268435002,-268435414,-268434803,-268434474,-268434838]
nums2 = [-268435449,-268434534,-268435051,-268434517,-268434544,-268434879,-268434597,-268435326,-268434748,-268434560,-268435192,-268434478,-268434810,-268435153,-268435061,-268434470,-268434733,-268435363,-268434580,-268435329,-268435227,-268434868,-268434475,-268434829,-268434804,-268434917,-268435134,-268434478,-268434525,-268434567,-268435434,-268435203,-268434804,-268434979,-268435141,-268434879,-268435046,-268435389,-268434928,-268435313,-268434892,-268434623,-268435100,-268434522,-268435178,-268435169,-268434670,-268435040,-268435267,-268434857,-268434667,-268434463,-268434960,-268434903,-268434588,-268435431,-268434466,-268435154,-268434990,-268434544,-268435262,-268435067,-268435158,-268434596,-268434641,-268434466,-268434773,-268435050,-268435293,-268435148,-268434614,-268434504,-268434797,-268435128,-268435336,-268434660,-268435163,-268435405,-268434462,-268434785,-268435383,-268435244,-268435406,-268434939,-268435416,-268435177,-268434580,-268434931,-268434803,-268435114,-268435072,-268434850,-268434500,-268434632,-268435073,-268435366,-268435250,-268435094,-268434460,-268434947]
nums3 = [268434570,268435299,268434594,268435215,268435163,268434582,268434957,268434905,268434934,268435013,268434659,268435339,268434868,268435282,268435372,268434735,268435201,268434846,268435158,268434479,268434970,268435345,268434991,268434939,268435018,268435409,268434748,268434985,268435016,268434607,268435104,268434693,268435007,268434724,268435410,268434519,268435127,268434513,268435287,268435182,268434786,268435198,268434932,268434973,268434975,268434490,268434879,268434792,268435321,268435421,268434546,268434805,268434979,268434857,268434710,268434704,268435310,268434584,268434688,268434570,268434529,268434935,268435392,268434816,268435018,268435020,268435353,268435447,268434891,268435017,268435350,268435063,268434588,268434799,268434502,268434850,268434596,268434614,268435268,268435023,268435104,268434794,268434895,268434964,268435271,268435130,268434866,268434596,268434721,268434912,268434848,268435244,268435077,268434848,268435322,268434767,268434651,268435129,268435386,268435275]
nums4 = [268434703,268435305,268434939,268434879,268434698,268435394,268434889,268435213,268435372,268435152,268434962,268434967,268434772,268435121,268434751,268434884,268435060,268435048,268435221,268434797,268434489,268435270,268434499,268434767,268434750,268435025,268434910,268434684,268434486,268434969,268435423,268434999,268435162,268434565,268434852,268435387,268435322,268434503,268435044,268434761,268435151,268435261,268434728,268434686,268434781,268435110,268434743,268435339,268434663,268435305,268435301,268434666,268434469,268434893,268435192,268434568,268434676,268434569,268434963,268434889,268435373,268434510,268434820,268434824,268435285,268435092,268435304,268435201,268434841,268435241,268434497,268435107,268434531,268434556,268434643,268435163,268435226,268435453,268434704,268435013,268434831,268435386,268435058,268435346,268434914,268435404,268435274,268434686,268434757,268434953,268435337,268435108,268435309,268435093,268434780,268434836,268434755,268435191,268434663,268434533]
print(fourSumCountDict(nums1, nums2, nums3, nums4))

nums1 = [-64,35,62,-34,43,-7,61,71,0,38,-33,-4,-41,59,23,-26,32,59,50,-20,-48,-14,-79,-54,-66,94,99,-52,9,4,-69,-2,27,4,65,41,-71,-66,-46,-2,39,-78,-93,68,-90,-7,30,-52,-81,-54,98,-43,-54,96,-69,1,-42,58,79,81,-13,-36,-24,-16,56,7,0,-12,49,-67,69,16,-26,-94,31,12,-19,78,36,1,35,-13,-67,10,-40,44,-29,-52,18,-32,72,-6,-27,8,82,-89,60,-27,-41,-33,-13,-9,-87,72,63,-32,-14,-82,-33,23,-69,89,-7,25,-65,-46,18,-93,-21,-99,-9,-93,22,-77,67,37,-50,-99,-75,-72,22,53,-61,-68,14,-75,50,-62,44,-51,35,-73,-11,-40,46,-45,40,-88,-30,22,-21,63,-62,5,-16,-46,20,-69,9,10,-37,-31,80,-61,-82,-12,-1,55,16,-37,-68,-74,-20,-51,79,-64,-46,3,-63,11,-28,-51,62]
nums2 = [-66,-58,-24,78,-93,-20,79,19,-2,51,-18,-92,43,-100,-51,-84,-31,-62,79,9,-8,99,14,-25,54,-2,-7,6,-80,-20,22,99,100,32,-92,-25,82,80,-77,16,44,50,72,63,22,67,-89,-86,93,22,-27,68,-86,54,-60,-11,4,-32,64,-75,-22,75,28,70,-75,50,-22,-1,10,-82,48,-71,9,-55,-34,-100,-6,-83,13,68,-99,2,33,-83,25,3,7,18,26,-97,-19,59,-28,5,62,37,72,-54,93,-55,5,42,38,19,83,-24,28,64,-48,48,-13,-97,84,-30,55,65,-58,69,12,19,10,-98,13,-87,98,79,-90,18,-12,21,-45,26,81,42,69,-100,51,62,-100,-71,29,88,4,-39,-65,-73,-77,49,-84,-20,-71,-29,-44,-14,91,73,-53,48,28,23,39,-67,-11,-43,85,-2,-14,17,-51,-67,41,-57,90,-25,29,9,96,45,-98,-45,43,-3,70]
nums3 = [-31,80,-61,-24,39,-68,-57,85,73,71,-83,63,-28,-40,-79,-85,60,-38,-44,-36,10,-67,80,2,79,23,11,-73,99,-1,-36,75,18,-5,-8,2,4,67,-38,-45,29,-25,-39,-25,-86,-40,47,94,88,50,26,-98,-83,70,42,72,-81,99,-73,-97,-1,39,-21,25,26,-24,-92,22,-2,67,90,-14,3,74,-18,62,69,5,-33,73,5,95,13,-47,70,20,-21,87,-72,-89,71,78,59,57,91,-71,-87,-8,-58,-39,-88,84,-72,6,33,33,-65,-8,-46,44,48,0,76,69,63,-69,93,-5,43,-76,6,-58,-77,-87,-18,69,-19,81,30,-15,63,24,-8,99,-63,-33,-84,-74,39,4,-12,-31,-99,23,-79,-44,90,-84,-80,-82,13,54,-1,12,2,20,88,3,-98,60,49,94,-27,-13,-77,15,-48,-84,-60,-3,68,-32,38,-29,77,79,22,-12,-75,94,-98,65,39]
nums4 = [-35,93,80,-55,-13,-62,-72,71,63,-31,11,-58,-21,33,47,-47,-92,42,100,66,-75,6,-14,-13,78,-29,29,15,-13,-1,65,-30,-29,-53,7,58,95,-14,66,98,85,81,-37,72,-4,8,-20,12,-3,-40,-61,59,-17,17,-94,-6,-44,49,-39,65,-90,-8,23,-49,-18,-8,83,64,-65,-65,-47,-77,-97,30,-45,53,-14,-75,-28,21,-7,2,-76,81,-12,88,-9,-4,-30,94,-41,-78,65,2,-57,42,92,71,-19,-34,67,60,-62,49,-75,55,-51,-49,22,-81,-39,-96,54,-88,75,-15,13,-82,-9,-50,-99,-31,-51,-95,28,-63,-48,62,93,-64,21,-37,95,-47,-41,-65,97,78,80,9,-68,-68,-5,-43,-75,79,-49,-75,40,17,23,-81,41,-91,-29,-17,93,-26,-43,-29,-36,-69,45,-80,73,3,-99,18,49,8,40,-100,38,-73,44,66,-20,39,-99,-20,86,0,-34]
print(fourSumCountDict(nums1, nums2, nums3, nums4))

nums1 = [43,-52,9,-33,52,0,-57,-3,-92,45,-68,-38,95,92,78,-10,1,-8,-98,62,-73,64,5,-32,-38,40,-80,-46,54,-23,30,65,-75,99,-32,-21,-12,-16,14,-28,-27,-26,38,58,-54,-15,64,71,61,62,-99,-77,-30,-9,-2,91,46,97,-6,-44,-50,24,-31,-62,-97,-42,-29,23,7,-77,81,94,-98,-52,99,21,69,-14,88,74,-43,-8,-38,81,58,34,6,91,-24,-82,74,-81,-99,-65,19,-10,-41,-63,34,27,41,-51,67,38,15,41,29,58,32,30,-40,-1,49,4,67,-81,95,56,-71,-55,42,79,-39,82,-99,73,-20,21,-13,-67,-31,54,56,-29,-37,-22,6,42,21,13,-16,-5,98,-6,59,100,100,-36,-81,-35,79,-98,-69,91,49,54]
nums2 = [85,-87,81,-76,74,67,-21,97,-11,97,9,-55,-87,-89,59,18,41,-38,61,60,37,-10,76,16,-80,-42,-48,18,50,-34,-79,-14,-99,8,-71,-29,-30,-69,-99,86,95,-65,9,84,0,-80,-8,-97,-85,95,-53,-72,38,-16,87,-63,51,-34,80,-40,49,45,11,13,100,36,92,44,-12,-24,-57,84,22,51,-2,26,59,79,-43,-56,95,36,20,-77,-38,57,-54,63,-7,53,15,-78,66,96,-53,-67,-6,-31,12,-10,-32,-37,80,48,-93,-96,-28,-22,-83,52,24,-17,-10,-50,0,86,64,-73,39,-59,-42,40,77,-32,-74,-11,47,35,67,-13,-92,-74,24,58,12,-23,-62,41,-30,-45,-14,-66,32,94,-16,-90,-62,-24,-83,-88,90,-29,-47,-83,-67,85]
nums3 = [-83,-45,-40,29,-66,-88,14,76,-24,30,80,70,-35,-79,8,-67,-64,10,-40,-28,62,-99,-44,-40,51,-86,-37,-18,59,-100,-7,32,-74,-71,-53,28,-17,1,66,-23,65,99,-77,-5,24,-42,50,-94,-44,23,92,-9,-28,78,-12,58,46,-29,-80,-60,-23,-93,8,100,-70,87,-8,-44,-74,18,36,-66,-30,80,-13,42,79,-32,90,90,-61,48,-22,-97,68,58,-46,-22,-77,-32,61,99,-51,48,11,96,2,-27,72,-3,78,15,42,58,-46,30,100,64,-21,85,36,-100,28,91,-51,-94,-25,15,-90,46,-26,2,36,56,40,-78,-47,52,35,-94,44,-19,-10,-44,14,45,-31,89,76,-65,-36,49,98,31,-48,-43,87,92,-30,-77,-30,82,-25,-70,-40,-63]
nums4 = [14,69,-76,-2,39,41,-58,58,-45,100,-66,33,82,9,24,27,17,-90,-55,66,-22,29,31,19,33,80,81,17,10,-20,-3,18,37,-48,-88,-69,-59,41,-82,-13,-31,59,-37,-16,13,-25,34,-69,6,86,-96,-9,-59,78,-65,-79,26,-42,-31,43,65,-30,-36,-35,-58,-88,-11,99,78,10,96,-1,22,70,67,-15,94,-39,57,41,52,53,11,47,27,92,80,-15,73,-73,-70,94,-88,-52,67,7,-58,-13,30,32,-98,-94,1,14,-72,-48,15,-28,-91,21,26,67,-99,-46,1,99,59,-90,75,43,81,-48,-95,29,-31,-63,-54,16,-17,-19,77,-2,44,-62,-1,70,26,-84,-68,97,-70,65,39,-56,56,-59,57,89,-13,-45,49,0,-68,-88,-70,-47]
print(fourSumCountDict(nums1, nums2, nums3, nums4))
print(fourSumCountDict2(nums1, nums2, nums3, nums4))
